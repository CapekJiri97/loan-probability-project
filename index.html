<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loan Eligibility Predictor</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    :root {
        --primary: #38655D;       
        --accent: #4ade80;        /* Zelená pro úspěch */
        --danger: #ef4444;        /* Červená pro zamítnutí */
        --bg: #111;
        --card-bg: #1e1e1e;
        --text-main: #e2e8f0;
        --text-muted: #94a3b8;
    }

    body {
        background-color: var(--bg);
        color: var(--text-main);
        font-family: 'Poppins', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 2rem 0;
    }

    .app-container {
        background-color: var(--card-bg);
        padding: 3rem;
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        max-width: 600px;
        width: 100%;
        border: 1px solid #333;
    }

    h2 {
        text-align: center;
        font-weight: 700;
        margin-bottom: 2rem;
        color: var(--text-main);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    label {
        font-weight: 500;
        color: var(--text-muted);
        margin-bottom: 0.5rem;
        display: block;
    }

    /* Vstupy */
    .form-control {
        background-color: #2a2a2a;
        border: 1px solid #444;
        color: white;
        border-radius: 8px;
        padding: 10px 15px;
    }
    .form-control:focus {
        background-color: #333;
        border-color: var(--primary);
        color: white;
        box-shadow: none;
    }

    /* Radio buttony (Custom styl) */
    .radio-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }
    
    .radio-option {
        position: relative;
    }
    
    .radio-option input {
        display: none; /* Skryje defaultní radio */
    }
    
    .radio-option label {
        background: #2a2a2a;
        padding: 8px 16px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 0.9rem;
        border: 1px solid #444;
        transition: all 0.3s;
        margin-bottom: 0;
    }

    .radio-option input:checked + label {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
    }

    /* Tlačítko */
    .btn-submit {
        background: var(--primary);
        color: white;
        width: 100%;
        padding: 12px;
        border-radius: 8px;
        font-weight: 600;
        border: none;
        margin-top: 2rem;
        transition: 0.3s;
        text-transform: uppercase;
    }
    .btn-submit:hover {
        background: #294D46;
        transform: translateY(-2px);
    }

    /* Výsledek */
    #result-box {
        margin-top: 2rem;
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
        display: none; /* Skryto defaultně */
    }
    
    .result-passed {
        background: rgba(74, 222, 128, 0.1);
        border: 1px solid var(--accent);
        color: var(--accent);
    }
    
    .result-denied {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid var(--danger);
        color: var(--danger);
    }

    .result-icon { font-size: 3rem; margin-bottom: 10px; display: block; }
    .result-title { font-size: 1.5rem; font-weight: 800; text-transform: uppercase; }
    .result-desc { color: var(--text-muted); font-size: 0.9rem; }

</style>
</head>
<body>

<div class="app-container">
    <h2><i class="fas fa-university"></i> Loan Eligibility</h2>
    
    <form id="loan-form">
        
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="age">Age</label>
                <input type="number" class="form-control" id="age" placeholder="Ex: 30" required min="18" max="99">
            </div>
            <div class="form-group col-md-4">
                <label for="children">Children</label>
                <input type="number" class="form-control" id="children" placeholder="0" required min="0" max="10">
            </div>
            <div class="form-group col-md-4">
                <label for="IQ">IQ Score</label>
                <input type="number" class="form-control" id="IQ" placeholder="Ex: 100" required min="80" max="200">
            </div>
        </div>

        <div class="form-group mt-3">
            <label>Gender</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="gender" id="gender_f" value="1" required>
                    <label for="gender_f"><i class="fas fa-female"></i> Female</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="gender" id="gender_m" value="0">
                    <label for="gender_m"><i class="fas fa-male"></i> Male</label>
                </div>
            </div>
        </div>

        <div class="form-group mt-3">
            <label>Marital Status</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="marstat" id="marstat_3" value="MarStat_3" required>
                    <label for="marstat_3">Single</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="marstat" id="marstat_2" value="MarStat_2">
                    <label for="marstat_2">Married</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="marstat" id="marstat_1" value="MarStat_1">
                    <label for="marstat_1">Divorced</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="marstat" id="marstat_4" value="MarStat_4">
                    <label for="marstat_4">Widow</label>
                </div>
            </div>
        </div>

        <div class="form-group mt-3">
            <label>Housing Situation</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="housing" id="housing_3" value="Housing_3" required>
                    <label for="housing_3">Own House</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="housing" id="housing_4" value="Housing_4">
                    <label for="housing_4">Rent</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="housing" id="housing_1" value="Housing_1">
                    <label for="housing_1">With Parents</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="housing" id="housing_2" value="Housing_2">
                    <label for="housing_2">Other</label>
                </div>
            </div>
        </div>

        <div class="form-group mt-3">
            <label>Education Level</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="education" id="education_2" value="education_2" required>
                    <label for="education_2">High School</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="education" id="education_3" value="education_3">
                    <label for="education_3">University</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="education" id="education_4" value="education_4">
                    <label for="education_4">PhD</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="education" id="education_1" value="education_1">
                    <label for="education_1">Elementary</label>
                </div>
            </div>
        </div>

        <div class="form-group mt-3">
            <label>Monthly Income</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" name="inc" id="inc_1" value="inc_1" required>
                    <label for="inc_1">None</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="inc" id="inc_2" value="inc_2">
                    <label for="inc_2">&lt; 15k</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="inc" id="inc_3" value="inc_3">
                    <label for="inc_3">15k - 30k</label>
                </div>
                <div class="radio-option">
                    <input type="radio" name="inc" id="inc_4" value="inc_4">
                    <label for="inc_4">30k +</label>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-submit">Calculate Probability <i class="fas fa-calculator"></i></button>
    </form>

    <div id="result-box">
        <i id="res-icon" class="result-icon"></i>
        <div id="res-title" class="result-title"></div>
        <p id="res-desc" class="result-desc"></p>
    </div>

</div>

<script>
    // Logistická Regrese (Tvé koeficienty)
    function logisticRegression(age, gender, marstat, education, housing, incGr, children, IQ) {
        const intercept = -3.953113;
        const ageCoeff = -0.025289;
        const genderFCoeff = 1.603121;
            
        const marstat_1 = 1.003217;
        const marstat_3 = 0.177465;
        const marstat_4 = 1.093052;

        const housing_1 = 1.559819;
        const housing_2 = 1.518677;
        const housing_4 = 0.088010;
    
        const educ_1 = 0.941741;
        const educ_2 = 0.536126;
        const educ_3 = -0.047020;
    
        const incGr_1 = 0.656499;
        const incGr_2 = 0.473824;
        const incGr_3 = 0.293464;
    
        const childrenCoeff = 0.074990;
        const IQCoeff = -0.013022;
        
        let score = intercept + (age * ageCoeff);
        score += (gender === "1" ? genderFCoeff : 0);
        
        if (marstat === "MarStat_1") score += marstat_1;
        else if (marstat === "MarStat_3") score += marstat_3;
        else if (marstat === "MarStat_4") score += marstat_4;

        if (housing === "Housing_1") score += housing_1;
        else if (housing === "Housing_2") score += housing_2;
        else if (housing === "Housing_4") score += housing_4;

        if (education === "education_1") score += educ_1;
        else if (education === "education_2") score += educ_2;
        else if (education === "education_3") score += educ_3;

        if (incGr === "inc_1") score += incGr_1;
        else if (incGr === "inc_2") score += incGr_2;
        else if (incGr === "inc_3") score += incGr_3;

        score += children * childrenCoeff;
        score += IQ * IQCoeff;

        const probability = 1 / (1 + Math.exp(-score));
        return probability; // Vracíme číslo pro přesnější výsledek
    }
    
    document.getElementById('loan-form').addEventListener('submit', function(event) {
        event.preventDefault();

        // Získání hodnot
        const age = parseFloat(document.getElementById('age').value);
        const gender = document.querySelector('input[name="gender"]:checked').value;
        const children = parseFloat(document.getElementById('children').value);
        const marstat = document.querySelector('input[name="marstat"]:checked').value;
        const housing = document.querySelector('input[name="housing"]:checked').value;
        const education = document.querySelector('input[name="education"]:checked').value;
        const incGr = document.querySelector('input[name="inc"]:checked').value;
        const IQ = parseFloat(document.getElementById('IQ').value);

        // Výpočet
        const pd = logisticRegression(age, gender, marstat, education, housing, incGr, children, IQ);
        const threshold = 0.25;

        // Zobrazení
        const box = document.getElementById('result-box');
        const icon = document.getElementById('res-icon');
        const title = document.getElementById('res-title');
        const desc = document.getElementById('res-desc');

        box.style.display = "block";
        box.classList.remove('result-passed', 'result-denied');

        if (pd < threshold) {
            // Úspěch (Nízká pravděpodobnost defaultu)
            box.classList.add('result-passed');
            icon.className = 'result-icon fas fa-check-circle';
            title.textContent = "Approved";
            desc.textContent = `Probability of Default is low (${(pd*100).toFixed(2)}%). You are eligible for a loan.`;
        } else {
            // Zamítnuto
            box.classList.add('result-denied');
            icon.className = 'result-icon fas fa-times-circle';
            title.textContent = "Denied";
            desc.textContent = `Probability of Default is too high (${(pd*100).toFixed(2)}%).`;
        }
    });
</script>

</body>
</html>
